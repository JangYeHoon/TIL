# AWS 서비스 비교 정리

- [DataSync vs Storage Gateway](#datasync-vs-storage-gateway)

## DataSync vs Storage Gateway

### DataSync

- AWS안에서 혹은 온프레미스에서 데이터를 이동하기 위한 서비스
  - AWS 스토리지 -> AWS 스토리지
  - 온프레미스 -> AWS 스토리지
- 다양한 AWS 스토리지 지원
  - S3, EFS, FSx, SnowCone(전송만 가능)
- Agent를 사용
  - VM으로 데이터의 소스를 읽어 AWS의 데이터 저장 서비스로 데이터를 전송
  - 동일한 AWS 계정에서 데이터를 전송할 땐 사용하지 않음
- 지원 프로토콜
  - NFS, SMB, HDFS, S3 API

#### 지원 기능

- 데이터의 전송 전 필터 적용 가능
- 스케쥴 설정 가능
- 데이터 무결성 검사
- 동시에 여러 소스에서 하나의 대상으로 전송 가능
- 전송 실패 시 재전송
- **주로 데이터의 전송 및 이동을 목적으로 하는 서비스**

### Storage Gateway

- 하이브리드 클라우드 스토리지 서비스 세트
- 하이브리드 환경에서 온프레미스에서 클라우드의 저장 서비스를 연동하기 위한 서비스
- Storage Gateway Appliance 사용
  - VM으로 온프레미스 데이터센터에 설치하여 데이터를 수집 및 전송
  - 혹은 AWS로부터 하드웨어를 구매해 설치 가능
- 종류
  - File Gateway : 데이터를 S3에 저장 후 NFS/SMB등으로 액세스
  - Volume Gateway : iSCSI 프로토콜로 데이터를 비동기적으로 EBS 스냅샷 형식으로 S3에 저장
    - Cashed Volume : 자주 사용되는 데이터만 로컬에 두고 모두 AWS에 백업
    - Stored Volume : 모든 데이터를 로컬에 저장하고 **비동기적으로** AWS에 백업
  - Tape Gateway : Tape 기반 백업 퍼플리케이션을 위한 서비스

### 서비스 차이점

|        내용        |               Data Sync                |             Sotrage Gateway              |
| :--------------: | :------------------------------------: | :--------------------------------------: |
|        목적        | AWS안에서 혹은 온프레미스에서 데이터를 **이동**하기 위한 서비스 | 하이브리드 환경에서 온프레미스에서 클라우드의 저장 서비스를 **연동**하기 위한 서비스 |
|      전송 필터       |           포함/제외 시킬 파일 지정 가능            |                    X                     |
|     지원 프로토콜      |         NFS, SMB, HDFS, S3 API         |             SMB, NFS, iSCSI              |
|      전송 대상       |              S3, EFS, FSx              |                    S3                    |
|      전송 서비스      |        온프레미스 -> AWS, AWS -> AWS        |               온프레미스 -> AWS               |
| S3 Glacier/DA 전송 |                   지원                   |        X(LifeCycle 정책으로 간접적으로 가능)        |
|     실패시 재전송      |                   O                    |                    X                     |
|      최대 쓰루풋      |                10gb/sec                |                500MB/sec                 |
|     데이터 엑세스      |                   X                    |                    O                     |

- DataSync : **데이터의 전송을 위한 서비스**
  - 데이터를 잘 전달하기 위한 기능으로 구성
    - 데이터 필터, 무결성 검사, 스케쥴링, 재시도 등
  - 다양한 서비스/주체간 데이터 전송 지원
- Storage Gateway : **온프레미스 환경에서 AWS의 스토리지를 이용하기 위한 서비스(주로 백업)**
  - 데이터를 클라우드에 저장하고 사용하거나 백업하기 위한 기능
    - 온프레미스에서 클라우드 환경의 데이터를 엑세스 가능
  - 테이프 기반 백업 어플리케이션 지원